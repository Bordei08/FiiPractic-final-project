CREATE OR REPLACE FUNCTION delete_user() RETURNS TRIGGER AS $my_table$
BEGIN
    
	DELETE FROM "POSTS" WHERE "REPOST_ID" = OLD."ID";
      
        DELETE FROM "POSTS" WHERE "CREATOR_ID" = OLD."ID";
    
	DELETE FROM "FOLLOW" WHERE "USER1_ID" = OLD."ID" OR "USER2" = OLD."ID";
	
	DELETE FROM "LIKES" WHERE "USER_ID" = OLD."ID";
	
	DELETE FROM "REPLIES" WHERE "USER_ID" = OLD."ID";

	DELETE FROM "MENTIONS" WHERE "USER_IG" = OLD."ID";
	
    RETURN OLD;
END;
$my_table$ LANGUAGE plpgsql;


CREATE TRIGGER user_trigger AFTER DELETE ON "USERS"
FOR EACH ROW EXECUTE PROCEDURE delete_user()